---
title: "A Trusted Cross-Platform Live Migration Technology for Confidential Containers"
collection: publications
permalink: /publication/2024-05-CoCoMigration.md
excerpt: '<u>Zhaoyang Geng</u>, Zhennan Min, Wenhao Wang'
date: 2024-05-01
venue: '信息安全学报(CCF B)'
paperurl: 'https://zhaoyang-geng.github.io/files/CoCoMigration.pdf'
---

Confidential containers, which utilize hardware isolation and encryption through trusted execution environment technologies such as AMD SEV, can safeguard the data within the container when the operating system or runtime platform is untrustworthy. This enhances the overall security of the program. In the contemporary industrial landscape, confidential containers are gaining traction as emerging security technologies due to their wide-ranging application potential. As the industry undergoes advancements and evolution, there will likely be multiple confidential containers sharing a single confidential virtual machine. If the performance of this shared virtual machine falls short for multiple confidential containers, it becomes imperative to execute live migration on one or more of these containers. Traditional container live migration techniques, however, do not accommodate confidential containers because the memory state of these containers is encrypted. This makes existing migration methodologies unsuitable for direct application. While AMD SEV offers support for the comprehensive migration of confidential virtual machines, addressing the specific requirements of confidential container failure recovery, load balancing, and other applications remains challenging, especially when multiple confidential containers are housed within a single confidential virtual machine. To address this gap, this paper integrates the current state of confidential container technology and draws inspiration from the live migration strategies of ordinary containers and virtual machines. It introduces, for the first time, an infrastructure for cross-platform trusted live migration technology tailored for the cases when multiple confidential containers run within the same container runtime environment and proposes a novel technical approach for identifying individual container identifiers during the process of utilizing device drivers to handle requests. Building on this foundation, the paper presents a live migration methodology that aligns with this architecture. This paper presents a prototype of a confidential container live migration scheme, implemented on the AMD SEV-SNP platform and integrated into the CRIU framework. The scheme involves retrieving Virtio structures from confidential virtual machines running multiple confidential containers to obtain detailed information about the states of these virtual devices. This information is then saved on the source platform and restored on the target platform where the confidential containers are migrated. The evaluation of the proposed live migration scheme demonstrates its effectiveness, with experimental results indicating that it can successfully complete trusted live migration of confidential containers with negligible downtime.
